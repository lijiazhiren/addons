# -----------------------------------------------------------
# 使用标准的 Debian 基础镜像 (与您的程序兼容)
# -----------------------------------------------------------
FROM debian:bookworm-slim

# 设置作者
LABEL io.hass.name="Workday Alarm Clock" io.hass.version="1.0.0"

# -----------------------------------------------------------
# 安装依赖
# -----------------------------------------------------------
RUN apt-get update && \
    apt-get install -y --no-install-recommends \
        bash \
        curl && \  // 仅保留 curl (如果您程序内部依赖它)
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# -----------------------------------------------------------
# 复制程序文件和启动脚本
# -----------------------------------------------------------
COPY rootfs/ /

# -----------------------------------------------------------
# 赋予可执行权限 (只需对 workdayAlarmClock 和 run.sh)
# -----------------------------------------------------------
RUN chmod +x /usr/bin/workdayAlarmClock /run.sh

# -----------------------------------------------------------
# 容器运行时配置
# -----------------------------------------------------------
EXPOSE 8080/tcp

# 启动命令
CMD [ "/bin/bash", "/run.sh" ]
